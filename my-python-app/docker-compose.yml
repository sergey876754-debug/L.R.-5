# Версия схемы Compose файла. Важно использовать совместимую версию.
# Версия 3.8 - современная и хорошо поддерживаемая.
version: '3.8'

# Раздел services (сервисы) - это сердце файла. Здесь мы описываем все контейнеры, которые хотим запустить.
services:
  # Определяем сервис с именем 'web'. Это может быть любое имя (например, 'app' или 'backend').
  web:
    # Указываем, что образ нужно собрать из Dockerfile, расположенного в текущей директории (.)
    build: .
    
    # Задаем имя для контейнера. Это аналог флага --name.
    container_name: my-python-app-compose
    
    # Аналог флага -p. Сопоставляем порт 8080 на хосте с портом 8080 в контейнере.
    ports:
      - "8080:8080"
    
    # (Закомментировано) Опциональная политика перезапуска.
    # 'unless-stopped' означает, что Docker всегда будет перезапускать этот контейнер, если он не был остановлен вручную.
    # restart: unless-stopped